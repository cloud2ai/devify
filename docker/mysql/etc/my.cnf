[client]
default-character-set = utf8mb4

[mysql]
default-character-set = utf8mb4

[mysqld]
# ===== Basic Settings =====
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
max_connections = 100                     # Reasonable limit for small servers
max_allowed_packet = 128M                 # Prevent large packet errors
sql_mode = STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION

# ===== InnoDB Settings =====
innodb_buffer_pool_size = 1G              # Main cache for data and indexes (~25% of total RAM)
innodb_log_file_size = 128M               # Redo log size; good balance between safety and performance
innodb_flush_log_at_trx_commit = 1        # 1 = safest; 2 for better performance (optional)
innodb_file_per_table = 1                 # Each table in a separate file (recommended)
innodb_flush_method = O_DIRECT            # Avoid double buffering
innodb_buffer_pool_instances = 1          # Only one instance needed for small memory

# ===== Temporary Tables =====
tmp_table_size = 32M                      # Size for in-memory temp tables
max_heap_table_size = 32M                 # Match tmp_table_size for consistency

# ===== Thread and Query Handling =====
thread_cache_size = 16                    # Reuse threads to reduce overhead
table_open_cache = 400                    # Cache open tables; avoid too high to save memory
query_cache_type = 0                      # Disabled (deprecated in MySQL 8)
query_cache_size = 0

# ===== Logging =====
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2                       # Log queries slower than 2 seconds

# ===== Networking =====
wait_timeout = 300                        # Close idle connections after 5 minutes
interactive_timeout = 300
skip-name-resolve = 1                     # Avoid DNS lookup delays

# ===== Other =====
performance_schema = OFF                  # Save memory if performance_schema is not needed
