# ============================================================================
# Devify - Open Source Self-Hosted Edition
# ============================================================================
# This is the open source self-hosted edition of Devify
# For commercial SaaS features, visit: https://aimychats.com
#
# Key differences from commercial version:
# - IMAP email integration only (no dedicated email addresses)
# - Unlimited credits for self-hosted instances
# - No payment integration required
# - Community support
#
# This sample file provides default configuration values.
# Copy this file to .env and modify according to your environment.
# ============================================================================

# ============================================================================
# ⚠️  IMPORTANT: Boolean Value Convention
# ============================================================================
# All boolean environment variables MUST use lowercase "true" or "false"
#
# ✅ Correct:   DJANGO_DEBUG=true, BILLING_ENABLED=false
# ❌ Incorrect: DJANGO_DEBUG=true, BILLING_ENABLED=1, USE_MIRROR=yes
#
# Reason: Ensures consistent behavior across Shell scripts and Python code.
# Only "true" and "false" (lowercase) are accepted as valid boolean values.
# ============================================================================

# ============================================================================
# Docker Build Configuration
# ============================================================================
# Control whether to use Chinese mirrors during Docker build
#
# Values:
#   true  - Use Chinese mirrors (Tsinghua University)
#          - Recommended for development in China (faster build)
#   false - Use default sources
#          - Recommended for production builds
#
# Default: true for dev, false for production
USE_MIRROR=true

# ============================================================================
# Django Configuration
# ============================================================================
SECRET_KEY="kxt=+vy=z4s_c6cy6vnu!v7d4f4y$hx0*!+cm(y^obo^yq0%da"
DJANGO_DEBUG=false
ALLOWED_HOSTS=localhost,127.0.0.1
CSRF_TRUSTED_ORIGINS='http://localhost'
CORS_ALLOW_ALL_ORIGINS=false
CORS_ALLOWED_ORIGINS='http://localhost:3000,http://127.0.0.1:3000'
DJANGO_LOG_LEVEL=INFO
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@example.com
DJANGO_SUPERUSER_PASSWORD=adminpassword

# Django Host Port (external port for Django API)
DJANGO_HOST_PORT=8000

# Nginx Port Configuration
# Note: HTTPS is handled by reverse proxy (e.g., Nginx Proxy Manager)
NGINX_HTTP_PORT=10080

# Attachment URL Configuration
# Base URL for serving email attachments
# Development: http://localhost:8000
# Production: Set to your domain or use relative URLs
ATTACHMENT_BASE_URL=http://localhost:8000

# ============================================================================
# Database Configuration
# ============================================================================
# Option 1: SQLite (Recommended for development)
DB_ENGINE=sqlite
SQLITE_PATH=db.sqlite3

# Option 2: MySQL
# DB_ENGINE=mysql
# MYSQL_USER=username
# MYSQL_PASSWORD=password
# MYSQL_HOST=localhost
# MYSQL_PORT=3306
# MYSQL_DATABASE=db
# MYSQL_ROOT_PASSWORD=rootpassword

# Option 3: PostgreSQL
# DB_ENGINE=postgresql
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=yourpassword
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=db

# ============================================================================
# Celery Configuration
# ============================================================================
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_LOG_LEVEL=INFO
CELERY_CONCURRENCY=1
CELERY_MAX_TASKS_PER_CHILD=1000
CELERY_MAX_MEMORY_PER_CHILD=256000
CELERY_WORKER_PREFETCH_MULTIPLIER=4

# ============================================================================
# Cache Configuration
# ============================================================================
CACHE_BACKEND=redis

# Flower Host Port (Celery monitoring - development only)
FLOWER_HOST_PORT=5555

# ============================================================================
# Email System Configuration (IMAP Only)
# ============================================================================
# Email attachment storage directory (container internal path)
EMAIL_ATTACHMENT_DIR=/opt/email_attachments

# Auto-assign email domain for virtual mailboxes
AUTO_ASSIGN_EMAIL_DOMAIN=devify.local

# Default language for new users
DEFAULT_LANGUAGE=en-US

# Default scene for new users (chat or product_issue)
DEFAULT_SCENE=chat

# Threadline configuration file path (container internal path)
THREADLINE_CONFIG_PATH=/opt/devify/conf/threadline

# ============================================================================
# Accounts & Authentication Configuration
# ============================================================================
# Email backend for notifications
# smtp: production, console: development (prints to terminal)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP server settings (for sending notification emails)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@example.com
EMAIL_HOST_PASSWORD=your-app-password
EMAIL_USE_TLS=true
DEFAULT_FROM_EMAIL=noreply@devify.local

# Django Site Configuration (Required for OAuth)
# The domain where your application is hosted
# Development: localhost:8000 or 127.0.0.1:8000
# Production: yourdomain.com or your-ip:port
SITE_DOMAIN=localhost:8000
SITE_NAME=Devify

# Google OAuth Configuration
# Set redirect URI in Google Cloud Console to:
# http://localhost:8000/accounts/google/login/callback/
GOOGLE_OAUTH_CLIENT_ID=your_google_client_id
GOOGLE_OAUTH_CLIENT_SECRET=your_google_client_secret

# OAuth Protocol Configuration
# Development: 'http' (default), Production: 'https'
# Ensures OAuth callback URLs use the correct protocol
ACCOUNT_DEFAULT_HTTP_PROTOCOL=http

# Registration token expiry time in hours
REGISTRATION_TOKEN_EXPIRY_HOURS=24

# Frontend URL (for OAuth redirects and email links)
FRONTEND_URL=http://localhost:3000

# Frontend API Base URL (for CORS and OAuth redirects)
# Should match the backend URL accessible from the frontend
VITE_API_BASE_URL=http://localhost:8000

# ============================================================================
# AI Services Configuration
# ============================================================================
# Azure OpenAI Configuration
AZURE_OPENAI_API_BASE=https://your-openai-endpoint.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
AZURE_OPENAI_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_API_VERSION=2024-10-01-preview
AZURE_OPENAI_MAX_TOKENS=10000
AZURE_OPENAI_TEMPERATURE=0.3

# LLM output language (e.g., English, Chinese, Japanese)
LLM_OUTPUT_LANGUAGE=English

# Azure OCR (Document Intelligence) Configuration
AZURE_DOCUMENT_INTELLIGENCE_KEY=your-azure-document-intelligence-key
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-ocr-endpoint.cognitiveservices.azure.com/

# ============================================================================
# Proxy Configuration (Optional)
# ============================================================================
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080
